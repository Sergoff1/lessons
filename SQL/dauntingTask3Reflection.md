Текущее решение стало ближе к эталонному, однако в нем есть ряд проблем. В этой задаче получилось приблизиться к эталонному расчёту общей эффективности отряда.

Ниже разобраны отличия моего решения от эталона:
1. В эталонном запросе выводится больше сведений. Не уверен, что это можно считать ошибкой, так как в моём запросе выводятся данные, которые были обозначены в примерах к заданию, а эталон выдаёт данные, которых не было в примере с возможным результатом.
2. Менее совершенный учёт прогрессии навыков отряда. Не учтены навыки типа `Military` (предполагал, что все боевые навыки относятся к категории `combat`). В моём запросе считается количество навыков у гнома до присоединения к отряду и количество навыков на момент выполнения запроса, исходя из этого выводится информация о развитии навыков. В эталоне вычисляется насколько прокачались навыки после присоединения к отряду. Причём учитываются лишь те навыки, которые были у гнома до вступления в отряд. При реализации своего решения я точно не знал за что отвечает столбец `level` в БД, глядя на эталон, начинаю подозревать, что `level` показывает уровень владения конкретным навыком.
3. Отличаются выбранные показатели для расчёта корреляции между тренировками и битвами. В моём решении учитывается количество тренировок, а в эталоне -- их эффективность. Также в эталоне рассматриваются битвы, произошедшие после тренировок. Показатели корреляции в моём запросе уступают таковым из эталона.
4. Ошибка в основном запросе. Применил агрегирующую функцию `avg` для подсчёта прокачки навыков без выражения `GROUP BY`. Нужно было использовать подход из эталона, когда выполняется группировка по всем нужным полям.
5. При получении списка участников отряда для объекта `related_entities` не отфильтровал гномов, которые покинули отряд. В эталоне же возвращается список действующих членов отряда.
